<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="draft-ietf-sip-events-05.css" CHARSET="ISO-8859-1" TYPE="text/css">
<TITLE>SIP-Specific Event Notification</TITLE>
<META CONTENT="RFC" VALUE="Internet Draft">
<META CONTENT="Title" VALUE="SIP-Specific Event Notification">
<META CONTENT="Date" VALUE="February 2002">
<META CONTENT="Last Name" VALUE="Roach">
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV>
<TABLE NAME="Header" WIDTH=100%><TR><TD>Internet Engineering Task Force<BR>Internet Draft<BR>Category: Standards Track</TD><TD ALIGN=RIGHT>Adam Roach<BR>dynamicsoft<BR>February 2002<BR>Expires August 2002<BR>&lt;draft-ietf-sip-events-05.fm&gt;</TD></TR></TABLE>

</DIV>
<DIV>
<H1 CLASS="Title">
<A NAME="pgfId-1036553"></A><A NAME="21178"></A>SIP-Specific Event Notification</H1>
</DIV>
<DIV>
<H1 CLASS="Heading0">
<A NAME="pgfId-1036554"></A>Status of this Memo</H1>
<P CLASS="Body">
<A NAME="pgfId-1035548"></A>This document is an Internet-Draft and is in full conformance with all provisions of Section 10 of RFC2026.</P>
<P CLASS="Body">
<A NAME="pgfId-1029014"></A>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF), its areas, and its working groups. Note that other groups may also distribute working documents as Internet-Drafts.</P>
<P CLASS="Body">
<A NAME="pgfId-1029015"></A>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time. It is inappropriate to use Internet-Drafts as reference material or cite them other than as &quot;work in progress&quot;.</P>
<P CLASS="Body">
<A NAME="pgfId-1029016"></A>The list of current Internet-Drafts can be accessed at http://www.ietf.org/ietf/lid-abstracts.txt</P>
<P CLASS="Body">
<A NAME="pgfId-1029017"></A>The list of Internet-Draft Shadow Directories can be accessed at http://www.ietf.org/shadow.html</P>
<P CLASS="Body">
<A NAME="pgfId-1029018"></A>This document is an individual submission to the IETF. Comments should be directed to the authors. </P>
</DIV>
<DIV>
<H1 CLASS="Heading0">
<A NAME="pgfId-1029451"></A>Abstract</H1>
<P CLASS="Body">
<A NAME="pgfId-1029452"></A>This document describes an extension to the Session Initiation Protocol (SIP). The purpose of this extension is to provide an extensible framework by which SIP nodes can request notification from remote nodes indicating that certain events have occurred.</P>
<P CLASS="Body">
<A NAME="pgfId-1030060"></A>Concrete uses of the mechanism described in this document may be standardized in the future.</P>
<P CLASS="Body">
<A NAME="pgfId-1032594"></A>Note that the event notification mechanisms defined herein are NOT intended to be a general-purpose infrastructure for all classes of event subscription and notification.</P>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1030062"></A>1.	Table of Contents</H1>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1031355"></A>2.	Introduction</H1>
<P CLASS="Body">
<A NAME="pgfId-1034778"></A>The ability to request asynchronous notification of events proves useful in many types of SIP services for which cooperation between end-nodes is required. Examples of such services include automatic callback services (based on terminal state events), buddy lists (based on user presence events), message waiting indications (based on mailbox state change events), and PSTN and Internet Internetworking (PINT) <A HREF="draft-ietf-sip-events-05.html#33731" CLASS="XRef">[3]</A> status (based on call state events).</P>
<P CLASS="Body">
<A NAME="pgfId-1029545"></A>The methods described in this document provide a framework by which notification of these events can be ordered.</P>
<P CLASS="Body">
<A NAME="pgfId-1032618"></A>The event notification mechanisms defined herein are NOT intended to be a general-purpose infrastructure for all classes of event subscription and notification. Meeting requirements for the general problem set of subscription and notification is far too complex for a single protocol. Our goal is to provide a SIP-specific framework for event notification which is not so complex as to be unusable for simple features, but which is still flexible enough to provide powerful services. Note, however, that event packages based on this framework may define arbitrarily elaborate rules which govern the subscription and notification for the events or classes of events they describe.</P>
<P CLASS="Body">
<A NAME="pgfId-1031210"></A>This draft does not describe an extension which may be used directly; it must be extended by other drafts (herein referred to as &quot;event packages&quot;.) In object-oriented design terminology, it may be thought of as an abstract base class which must be derived into an instantiatable class by further extensions. Guidelines for creating these extensions are described in section <A HREF="draft-ietf-sip-events-05.html#68360" CLASS="XRef">5.</A></P>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1030419"></A>2.1.	Overview of Operation</H2>
<P CLASS="Body">
<A NAME="pgfId-1030590"></A>The general concept is that entities in the network can subscribe to resource or call state for various resources or calls in the network, and those entities (or entities acting on their behalf) can send notifications when those states change.</P>
<P CLASS="Body">
<A NAME="pgfId-1030625"></A>A typical flow of messages would be:</P>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1030591"></A>Subscriber          Notifier
    |-----SUBSCRIBE----&gt;|     Request state subscription
    |&lt;-------200--------|     Acknowledge subscription
    |&lt;------NOTIFY----- |     Return current state information
    |--------200-------&gt;|
    |&lt;------NOTIFY----- |     Return current state information
    |--------200-------&gt;|</PRE>
</P>
<P CLASS="Body">
<A NAME="pgfId-1030626"></A>Subscriptions are expired and must be refreshed by subsequent SUBSCRIBE messages.</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1035427"></A>2.2.	Documentation Conventions</H2>
<P CLASS="Body">
<A NAME="pgfId-1040360"></A>There are several paragraphs throughout the document which provide motivational or clarifying text. Such passages are non-normative, and are provided only to assist with reader comprehension. These passages are set off from the remainder of the text by being indented thus:</P>
<P CLASS="comment">
<A NAME="pgfId-1040361"></A>This is an example of non-normative explanatory text. It does not form part of the specification, and is used only for clarification.</P>
<P CLASS="Body">
<A NAME="pgfId-1040371"></A>Numbers in square brackets (e.g. [1]) denote a reference to one of the entries in the References section; see section <A HREF="draft-ietf-sip-events-05.html#67366" CLASS="XRef">9.</A></P>
<P CLASS="Body">
<A NAME="pgfId-1040383"></A>The all-capital terms &quot;MUST&quot;, &quot;SHOULD&quot;, &quot;MAY&quot;, &quot;SHOULD NOT&quot;, and &quot;MUST NOT&quot; are used as defined in RFC 2119 <A HREF="draft-ietf-sip-events-05.html#83843" CLASS="XRef">[7]</A>.</P>
<P CLASS="Body">
<A NAME="pgfId-1040420"></A>The use of quotation marks next to periods and commas follows the convention used by the American Mathematical Society; although contrary to traditional American English convention, this usage lends clarity to certain passages.</P>
</DIV>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1040356"></A>3.	Definitions</H1>
<P CLASS="Definitions">
<A NAME="pgfId-1036626"></A>Event Package: An event package is an additional specification which defines a set of state information to be reported by a notifier to a subscriber. Event packages also define further syntax and semantics based on the framework defined by this document required to convey such state information.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1036766"></A>Event Template-Package: An event template-package is a special kind of event package which defines a set of state which may be applied to all possible event packages, including itself.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1036759"></A>Notification: Notification is the act of a notifier sending a NOTIFY message to a subscriber to inform the subscriber of the state of a resource.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1036235"></A>Notifier: A notifier is a user agent which generates NOTIFY requests for the purpose of notifying subscribers of the state of a resource. Notifiers typically also accept SUBSCRIBE requests to create subscriptions.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1035453"></A>State Agent: A state agent is a notifier which publishes state information on behalf of a resource; in order to do so, it may need to gather such state information from multiple sources. State agents always have complete state information for the resource for which they are creating notifications.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1035439"></A>Subscriber: A subscriber is a user agent which receives NOTIFY requests from notifiers; these NOTIFY requests contain information about the state of a resource in which the subscriber is interested. Subscribers typically also generate SUBSCRIBE requests and send them to notifiers to create subscriptions.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1036228"></A>Subscription: A subscription is a set of application state associated with a dialog. This application state includes a pointer to the associated dialog, the event package name, and possibly an identification token. Event packages will define additional subscription state information. By definition, subscriptions exist in both a subscriber and a notifier.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1036827"></A>Subscription Migration: Subscription migration is the act of moving a subscription from one notifier to another notifier.</P>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1035430"></A>4.	<A NAME="45552"></A>Node Behavior</H1>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1031421"></A>4.1.	Description of SUBSCRIBE Behavior</H2>
<P CLASS="Body">
<A NAME="pgfId-1032678"></A>The SUBSCRIBE method is used to request current state and state updates from a remote node.</P>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1033890"></A>4.1.1.	<A NAME="12566"></A>Subscription Duration</H3>
<P CLASS="Body">
<A NAME="pgfId-1033891"></A>SUBSCRIBE requests SHOULD contain an &quot;Expires&quot; header (defined in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>). This expires value indicates the duration of the subscription. In order to keep subscriptions effective beyond the duration communicated in the &quot;Expires&quot; header, subscribers need to refresh subscriptions on a periodic basis using a new SUBSCRIBE message on the same dialog as defined in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
<P CLASS="Body">
<A NAME="pgfId-1033896"></A>If no &quot;Expires&quot; header is present in a SUBSCRIBE request, the implied default is defined by the event package being used.</P>
<P CLASS="Body">
<A NAME="pgfId-1035955"></A>200-class responses to SUBSCRIBE requests also MUST contain an &quot;Expires&quot; header. The period of time in the response MAY be shorter but MUST NOT be longer than specified in the request. The period of time in the response is the one which defines the duration of the subscription.</P>
<P CLASS="Body">
<A NAME="pgfId-1036615"></A>An &quot;expires&quot; parameter on the &quot;Contact&quot; header has no semantics for SUBSCRIBE and is explicitly not equivalent to an &quot;Expires&quot; header in a SUBSCRIBE request or response.</P>
<P CLASS="Body">
<A NAME="pgfId-1035956"></A>A natural consequence of this scheme is that a SUBSCRIBE with an &quot;Expires&quot; of 0 constitutes a request to unsubscribe from an event.</P>
<P CLASS="comment">
<A NAME="pgfId-1040453"></A>In addition to being a request to unsubscribe, a SUBSCRIBE message with &quot;Expires&quot; of 0 also causes a fetch of state; see section <A HREF="draft-ietf-sip-events-05.html#23772" CLASS="XRef">4.3.6.</A></P>
<P CLASS="Body">
<A NAME="pgfId-1031441"></A>Notifiers may also wish to cancel subscriptions to events; this is useful, for example, when the resource to which a subscription refers is no longer available. Further details on this mechanism are discussed in section <A HREF="draft-ietf-sip-events-05.html#48698" CLASS="XRef">4.2.2.</A></P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1030276"></A>4.1.2.	<A NAME="28631"></A>Identification of Subscribed Events and Event Classes</H3>
<P CLASS="Body">
<A NAME="pgfId-1032132"></A>Identification of events is provided by three pieces of information: Request URI, Event Type, and (optionally) message body.</P>
<P CLASS="Body">
<A NAME="pgfId-1030278"></A>The Request URI of a SUBSCRIBE request, most importantly, contains enough information to route the request to the appropriate entity per the request routing procedures outlined in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>. It also contains enough information to identify the resource for which event notification is desired, but not necessarily enough information to uniquely identify the nature of the event (e.g. &quot;sip:adam@dynamicsoft.com&quot; would be an appropriate URI to subscribe to for my presence state; it would also be an appropriate URI to subscribe to the state of my voice mailbox).</P>
<P CLASS="Body">
<A NAME="pgfId-1032146"></A>Subscribers MUST include exactly one &quot;Event&quot; header in SUBSCRIBE requests, indicating to which event or class of events they are subscribing. The &quot;Event&quot; header will contain a token which indicates the type of state for which a subscription is being requested. This token will be registered with the IANA and will correspond to an event package which further describes the semantics of the event or event class. The &quot;Event&quot; header MAY also contain an &quot;id&quot; parameter. This &quot;id&quot; parameter, if present, contains an opaque token which identifies the specific subscription within a dialog. An &quot;id&quot; parameter is only valid within the scope of a single dialog.</P>
<P CLASS="Body">
<A NAME="pgfId-1035030"></A>If the event package to which the event token corresponds defines behavior associated with the body of its SUBSCRIBE requests, those semantics apply.</P>
<P CLASS="Body">
<A NAME="pgfId-1035033"></A>Event packages may also define parameters for the Event header; if they do so, they must define the semantics for such parameters.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1032112"></A>4.1.3.	Additional SUBSCRIBE Header Values</H3>
<P CLASS="Body">
<A NAME="pgfId-1032119"></A>Because SUBSCRIBE requests create a dialog as defined in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>, they MAY contain an &quot;Accept&quot; header. This header, if present, indicates the body formats allowed in subsequent NOTIFY requests. Event packages MUST define the behavior for SUBSCRIBE requests without &quot;Accept&quot; headers; usually, this will connote a single, default body type.</P>
<P CLASS="Body">
<A NAME="pgfId-1032120"></A>Header values not described in this document are to be interpreted as described in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1030003"></A>4.1.4.	<A NAME="67836"></A>Subscriber SUBSCRIBE Behavior</H3>
<DIV>
<H4 CLASS="Heading4">
<A NAME="pgfId-1032163"></A>4.1.4.1.	<A NAME="28678"></A>Requesting a Subscription</H4>
<P CLASS="Body">
<A NAME="pgfId-1034890"></A>SUBSCRIBE is a dialog-creating method, as described in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
<P CLASS="Body">
<A NAME="pgfId-1036251"></A>When a subscriber wishes to subscribe to a particular state for a resource, it forms a SUBSCRIBE message. If the initial SUBSCRIBE represents a request outside of a dialog (as it typically will), its construction follows the procedures outlined in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A> for UAC request generation outside of a dialog.</P>
<P CLASS="Body">
<A NAME="pgfId-1032168"></A>This SUBSCRIBE request will be confirmed with a final response. 200-class responses indicate that the subscription has been accepted, and that a NOTIFY will be sent immediately. A 200 response indicates that the subscription has been accepted and that the user is authorized to subscribe to the requested resource. A 202 response merely indicates that the subscription has been understood, and that authorization may or may not have been granted.</P>
<P CLASS="Body">
<A NAME="pgfId-1035561"></A>The &quot;Expires&quot; header in a 200-class response to SUBSCRIBE indicates the actual duration for which the subscription will remain active (unless refreshed).</P>
<P CLASS="Body">
<A NAME="pgfId-1040552"></A>Non-200 class final responses indicate that no subscription or dialog has been created, and no subsequent NOTIFY message will be sent. All non-200 class responses (with the exception of &quot;489&quot;, described herein) have the same meanings and handling as described in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
<P CLASS="Body">
<A NAME="pgfId-1040556"></A>A SUBSCRIBE request MAY include an &quot;id&quot; parameter in its &quot;Event&quot; header to allow differentiation between multiple subscriptions in the same dialog.</P>
</DIV>
<DIV>
<H4 CLASS="Heading4">
<A NAME="pgfId-1031979"></A>4.1.4.2.	Refreshing of Subscriptions</H4>
<P CLASS="Body">
<A NAME="pgfId-1032259"></A>At any time before a subscription expires, the subscriber may refresh the timer on such a subscription by sending another SUBSCRIBE request on the same dialog as the existing subscription, and with the same &quot;Event&quot; header &quot;id&quot; parameter (if one was present in the initial subscription). The handling for such a request is the same as for the initial creation of a subscription except as described below.</P>
<P CLASS="comment">
<A NAME="pgfId-1036592"></A>If the initial SUBSCRIBE message contained an &quot;id&quot; parameter on the &quot;Event&quot; header, then refreshes of the subscription must also contain an identical &quot;id&quot; parameter; they will otherwise be considered new subscriptions in an existing dialog.</P>
<P CLASS="Body">
<A NAME="pgfId-1036604"></A>If a SUBSCRIBE request to refresh a subscription receives a &quot;481&quot; response, this indicates that the subscription has been terminated and that the subscriber did not receive notification of this fact. In this case, the subscriber should consider the subscription invalid. If the subscriber wishes to re-subscribe to the state, he does so by composing an unrelated initial SUBSCRIBE request with a freshly-generated Call-ID and a new, unique &quot;From&quot; tag (see section <A HREF="draft-ietf-sip-events-05.html#28678" CLASS="XRef">4.1.4.1.</A>)</P>
<P CLASS="Body">
<A NAME="pgfId-1036500"></A>If a SUBSCRIBE request to refresh a subscription fails with a non-481 response, the original subscription is still considered valid for the duration of the most recently known &quot;Expires&quot; value as negotiated by SUBSCRIBE and its response, or as communicated by NOTIFY in the &quot;Subscription-State&quot; header &quot;expires&quot; parameter.</P>
<P CLASS="comment">
<A NAME="pgfId-1041011"></A>Note that many such errors indicate that there may be a problem with the network or the notifier such that no further NOTIFY messages will be received.</P>
</DIV>
<DIV>
<H4 CLASS="Heading4">
<A NAME="pgfId-1032258"></A>4.1.4.3.	Unsubscribing</H4>
<P CLASS="Body">
<A NAME="pgfId-1040469"></A>Unsubscribing is handled in the same way as refreshing of a subscription, with the &quot;Expires&quot; header set to &quot;0&quot;. Note that a successful unsubscription will also trigger a final NOTIFY message.</P>
</DIV>
<DIV>
<H4 CLASS="Heading4">
<A NAME="pgfId-1040470"></A>4.1.4.4.	Confirmation of Subscription Creation</H4>
<P CLASS="Body">
<A NAME="pgfId-1036478"></A>The subscriber can expect to receive a NOTIFY message from each node which has processed a successful subscription or subscription refresh. Until the first NOTIFY message arrives, the subscriber should consider the state of the subscribed resource to be in a neutral state. Event packages which define new event packages MUST define this &quot;neutral state&quot; in such a way that makes sense for their application (see section <A HREF="draft-ietf-sip-events-05.html#90682" CLASS="XRef">5.4.7.</A>).</P>
<P CLASS="Body">
<A NAME="pgfId-1036179"></A>Due to the potential for both out-of-order messages and forking, the subscriber MUST be prepared to receive NOTIFY messages before the SUBSCRIBE transaction has completed.</P>
<P CLASS="Body">
<A NAME="pgfId-1032175"></A>Except as noted above, processing of this NOTIFY is the same as in section <A HREF="draft-ietf-sip-events-05.html#47664" CLASS="XRef">4.2.4.</A></P>
</DIV>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1030332"></A>4.1.5.	<A NAME="35725"></A>Proxy SUBSCRIBE Behavior</H3>
<P CLASS="Body">
<A NAME="pgfId-1030639"></A>Proxies need no additional behavior beyond that described in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A> to support SUBSCRIBE. If a proxy wishes to see all of the SUBSCRIBE and NOTIFY requests for a given dialog, it MUST record-route the initial SUBSCRIBE and any dialog-establishing NOTIFY requests. Such proxies SHOULD also record-route all other SUBSCRIBE and NOTIFY requests.</P>
<P CLASS="comment">
<A NAME="pgfId-1041015"></A>Note that subscribers and notifiers may elect to use S/MIME encryption of SUBSCRIBE and NOTIFY requests; consequently, proxies cannot rely on being able to access any information that is not explicitly required to be proxy-readable by SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1030496"></A>4.1.6.	<A NAME="76046"></A>Notifier SUBSCRIBE Behavior</H3>
<DIV>
<H4 CLASS="Heading4">
<A NAME="pgfId-1031919"></A>4.1.6.1.	Initial SUBSCRIBE Transaction Processing</H4>
<P CLASS="Body">
<A NAME="pgfId-1035062"></A>In no case should a SUBSCRIBE transaction extend for any longer than the time necessary for automated processing. In particular, notifiers MUST NOT wait for a user response before returning a final response to a SUBSCRIBE request.</P>
<P CLASS="comment">
<A NAME="pgfId-1035669"></A>This requirement is imposed primarily to prevent the non-INVITE transaction timeout timer F (see <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>) from firing during the SUBSCRIBE transaction, since interaction with a user would often exceed 64*T1 seconds.</P>
<P CLASS="Body">
<A NAME="pgfId-1035063"></A>The notifier SHOULD check that the event package specified in the &quot;Event&quot; header is understood. If not, the notifier SHOULD return a &quot;489 Bad Event&quot; response to indicate that the specified event/event class is not understood.</P>
<P CLASS="Body">
<A NAME="pgfId-1030749"></A>The notifier SHOULD also perform any necessary authentication and authorization per its local policy. See section <A HREF="draft-ietf-sip-events-05.html#41044" CLASS="XRef">4.1.6.3.</A></P>
<P CLASS="Body">
<A NAME="pgfId-1040545"></A>The notifier MAY also check that the duration in the &quot;Expires&quot; header is not too small. If and only if the expiration interval is greater than zero AND smaller than one hour AND less than a notifier-configured minimum, the notifier MAY return a &quot;423 Interval too small&quot; error which contains a &quot;Min-Expires&quot; header field. The &quot;Min-Expires&quot; header field is described in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
<P CLASS="Body">
<A NAME="pgfId-1032194"></A>If the notifier is able to immediately determine that it understands the event package, that the authenticated subscriber is authorized to subscribe, and that there are no other barriers to creating the subscription, it creates the subscription and a dialog (if necessary), and returns a &quot;200 OK&quot; response (unless doing so would reveal authorization policy in an undesirable fashion; see section <A HREF="draft-ietf-sip-events-05.html#64775" CLASS="XRef">6.2.</A>).</P>
<P CLASS="Body">
<A NAME="pgfId-1031797"></A>If the notifier cannot immediately create the subscription (e.g. it needs to wait for user input for authorization, or is acting for another node which is not currently reachable), or wishes to mask authorization policy, it will return a &quot;202 Accepted&quot; response. This response indicates that the request has been received and understood, but does not necessarily imply that the subscription has been authorized yet.</P>
<P CLASS="Body">
<A NAME="pgfId-1031796"></A>When a subscription is created in the notifier, it stores the event package name and the &quot;Event&quot; header &quot;id&quot; parameter (if present) as part of the subscription information.</P>
<P CLASS="Body">
<A NAME="pgfId-1036632"></A>The &quot;Expires&quot; values present in SUBSCRIBE 200-class responses behave in the same way as they do in REGISTER responses: the server MAY shorten the interval, but MUST NOT lengthen it. </P>
<P CLASS="comment">
<A NAME="pgfId-1041238"></A>If the duration specified in a SUBSCRIBE message is unacceptably short, the notifier may be able to send a 423 response, as described earlier in this section.</P>
<P CLASS="Body">
<A NAME="pgfId-1035073"></A>200-class responses to SUBSCRIBE requests will not generally contain any useful information beyond subscription duration; their primary purpose is to serve as a reliability mechanism. State information will be communicated via a subsequent NOTIFY request from the notifier.</P>
<P CLASS="Body">
<A NAME="pgfId-1035074"></A>The other response codes defined in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A> may be used in response to SUBSCRIBE requests, as appropriate.</P>
</DIV>
<DIV>
<H4 CLASS="Heading4">
<A NAME="pgfId-1034314"></A>4.1.6.2.	Confirmation of Subscription Creation/Refreshing</H4>
<P CLASS="Body">
<A NAME="pgfId-1031697"></A>Upon successfully accepting or refreshing a subscription, notifiers MUST send a NOTIFY message immediately to communicate the current resource state to the subscriber. This NOTIFY message is sent on the same dialog as created by the SUBSCRIBE response. If the resource has no meaningful state at the time that the SUBSCRIBE message is processed, this NOTIFY message MAY contain an empty or neutral body. See section <A HREF="draft-ietf-sip-events-05.html#48698" CLASS="XRef">4.2.2.</A> for further details on NOTIFY message generation.</P>
<P CLASS="Body">
<A NAME="pgfId-1034388"></A>Note that a NOTIFY message is always sent immediately after any 200-class response to a SUBSCRIBE request, regardless of whether the subscription has already been authorized.</P>
</DIV>
<DIV>
<H4 CLASS="Heading4">
<A NAME="pgfId-1032914"></A>4.1.6.3.	<A NAME="41044"></A>Authentication/Authorization of SUBSCRIBE requests</H4>
<P CLASS="Body">
<A NAME="pgfId-1035082"></A>Privacy concerns may require that notifiers apply policy to determine whether a particular subscriber is authorized to subscribe to a certain set of events. Such policy may be defined by mechanisms such as access control lists or real-time interaction with a user. In general, authorization of subscribers prior to authentication is not particularly useful.</P>
<P CLASS="Body">
<A NAME="pgfId-1032205"></A>SIP authentication mechanisms are discussed in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>. Note that, even if the notifier node typically acts as a proxy, authentication for SUBSCRIBE requests will always be performed via a &quot;401&quot; response, not a &quot;407;&quot; notifiers always act as a user agents when accepting subscriptions and sending notifications.</P>
<P CLASS="comment">
<A NAME="pgfId-1041038"></A>Of course, when acting as a proxy, a node will perform normal proxy authentication (using 407). The foregoing explanation is a reminder that notifiers are always UAs, and as such perform UA authentication.</P>
<P CLASS="Body">
<A NAME="pgfId-1031862"></A>If authorization fails based on an access list or some other automated mechanism (i.e. it can be automatically authoritatively determined that the subscriber is not authorized to subscribe), the notifier SHOULD reply to the request with a &quot;403 Forbidden&quot; or &quot;603 Decline&quot; response, unless doing so might reveal information that should stay private; see section <A HREF="draft-ietf-sip-events-05.html#64775" CLASS="XRef">6.2.</A></P>
<P CLASS="Body">
<A NAME="pgfId-1031863"></A>If the notifier owner is interactively queried to determine whether a subscription is allowed, a &quot;202 Accept&quot; response is returned immediately. Note that a NOTIFY message is still formed and sent under these circumstances, as described in the previous section.</P>
<P CLASS="Body">
<A NAME="pgfId-1034337"></A>If subscription authorization was delayed and the notifier wishes to convey that such authorization has been declined, it may do so by sending a NOTIFY message containing a &quot;Subscription-State&quot; header with a value of &quot;terminated&quot; and a reason parameter of &quot;rejected&quot;.</P>
</DIV>
<DIV>
<H4 CLASS="Heading4">
<A NAME="pgfId-1031937"></A>4.1.6.4.	Refreshing of Subscriptions</H4>
<P CLASS="Body">
<A NAME="pgfId-1036583"></A>When a notifier receives a subscription refresh, assuming that the subscriber is still authorized, the notifier updates the expiration time for subscription. As with the initial subscription, the server MAY shorten the amount of time until expiration, but MUST NOT increase it. The final expiration time is placed in the &quot;Expires&quot; header in the response. If the duration specified in a SUBSCRIBE message is unacceptably short, the notifier SHOULD respond with a &quot;423 Subscription Too Brief&quot; message.</P>
<P CLASS="Body">
<A NAME="pgfId-1031088"></A>If no refresh for a notification address is received before its expiration time, the subscription is removed. When removing a subscription, the notifier SHOULD send a NOTIFY message with a &quot;Subscription-State&quot; value of &quot;terminated&quot; to inform it that the subscription is being removed. If such a message is sent, the &quot;Subscription-State&quot; header SHOULD contain a &quot;reason=timeout&quot; parameter.</P>
<P CLASS="comment">
<A NAME="pgfId-1036514"></A>The sending of a NOTIFY when a subscription expires allows the corresponding dialog to be terminated, if appropriate.</P>
</DIV>
</DIV>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1030729"></A>4.2.	<A NAME="59040"></A>Description of NOTIFY Behavior</H2>
<P CLASS="Body">
<A NAME="pgfId-1032324"></A>NOTIFY messages are sent to inform subscribers of changes in state to which the subscriber has a subscription. Subscriptions are typically put in place using the SUBSCRIBE method; however, it is possible that other means have been used.</P>
<P CLASS="Body">
<A NAME="pgfId-1032653"></A>If any non-SUBSCRIBE mechanisms are defined to create subscriptions, it is the responsibility of the parties defining those mechanisms to ensure that correlation of a NOTIFY message to the corresponding subscription is possible. Designers of such mechanisms are also warned to make a distinction between sending a NOTIFY message to a subscriber who is aware of the subscription, and sending a NOTIFY message to an unsuspecting node. The latter behavior is invalid, and MUST receive a &quot;481 Subscription does not exist&quot; response (unless some other 400- or 500-class error code is more applicable), as described in section <A HREF="draft-ietf-sip-events-05.html#47664" CLASS="XRef">4.2.4.</A> In other words, knowledge of a subscription must exist in both the subscriber and the notifier to be valid, even if installed via a non-SUBSCRIBE mechanism.</P>
<P CLASS="Body">
<A NAME="pgfId-1032650"></A>A NOTIFY does not terminate its corresponding subscription; in other words, a single SUBSCRIBE request may trigger several NOTIFY requests.</P>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1035114"></A>4.2.1.	<A NAME="27232"></A>Identification of Reported Events, Event Classes, and Current State</H3>
<P CLASS="Body">
<A NAME="pgfId-1035115"></A>Identification of events being reported in a notification is very similar to that described for subscription to events (see section <A HREF="draft-ietf-sip-events-05.html#28631" CLASS="XRef">4.1.2.</A>).</P>
<P CLASS="Body">
<A NAME="pgfId-1031533"></A>As in SUBSCRIBE requests, NOTIFY &quot;Event&quot; headers will contain a single event package name for which a notification is being generated. The package name in the &quot;Event&quot; header MUST match the &quot;Event&quot; header in the corresponding SUBSCRIBE message. If an &quot;id&quot; parameter was present in the SUBSCRIBE message, that &quot;id&quot; parameter MUST also be present in the corresponding NOTIFY messages.</P>
<P CLASS="Body">
<A NAME="pgfId-1030296"></A>Event packages may define semantics associated with the body of their NOTIFY requests; if they do so, those semantics apply. NOTIFY bodies are expected to provide additional details about the nature of the event which has occurred and the resultant resource state.</P>
<P CLASS="Body">
<A NAME="pgfId-1031147"></A>When present, the body of the NOTIFY request MUST be formatted into one of the body formats specified in the &quot;Accept&quot; header of the corresponding SUBSCRIBE request. This body will contain either the state of the subscribed resource or a pointer to such state in the form of a URI.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1031743"></A>4.2.2.	<A NAME="48698"></A>Notifier NOTIFY Behavior</H3>
<P CLASS="Body">
<A NAME="pgfId-1031125"></A>When a SUBSCRIBE request is answered with a 200-class response, the notifier MUST immediately construct and send a NOTIFY request to the subscriber. When a change in the subscribed state occurs, the notifier SHOULD immediately construct and send a NOTIFY request, subject to authorization, local policy, and throttling considerations.</P>
<P CLASS="Body">
<A NAME="pgfId-1032686"></A>A NOTIFY request is considered failed if the response times out, or a non-200 class response code is received which has no &quot;Retry-After&quot; header and no implied further action which can be taken to retry the request (e.g. &quot;401 Authorization Required&quot;.)</P>
<P CLASS="Body">
<A NAME="pgfId-1036642"></A>If the NOTIFY request fails (as defined above) due to a timeout condition, and the subscription was installed using a soft-state mechanism (such as SUBSCRIBE), the notifier SHOULD remove the subscription.</P>
<P CLASS="comment">
<A NAME="pgfId-1036643"></A>This behavior prevents unnecessary transmission of state information for subscribers who have crashed or disappeared from the network. Because such transmissions will be sent multiple times, per the retransmission algorithm defined in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A> (instead of the typical single transmission for functioning clients), continuing to service them when no client is available to acknowledge them could place undue strain on a network. Upon client restart or reestablishment of a network connection, it is expected that clients will send SUBSCRIBE messages to refresh potentially stale state information; such messages will re-install subscriptions in all relevant nodes.</P>
<P CLASS="Body">
<A NAME="pgfId-1034527"></A>If the NOTIFY request fails (as defined above) due to an error response, and the subscription was installed using a soft-state mechanism, the notifier MUST remove the corresponding subscription.</P>
<P CLASS="comment">
<A NAME="pgfId-1035930"></A>A notify error response would generally indicate that something has gone wrong with the subscriber or with some proxy on the way to the subscriber. If the subscriber is in error, it makes the most sense to allow the subscriber to rectify the situation (by re-subscribing) once the error condition has been handled. If a proxy is in error, the periodic SUBSCRIBE refreshes will re-install subscription state once the network problem has been resolved.</P>
<P CLASS="Body">
<A NAME="pgfId-1034042"></A>If a NOTIFY request receives a 481 response, the notifier MUST remove the corresponding subscription even if such subscription was installed by non-SUBSCRIBE means (such as an administrative interface).</P>
<P CLASS="comment">
<A NAME="pgfId-1035924"></A>If the above behavior were not required, subscribers receiving a notify for an unknown subscription would need to send an error status code in response to the NOTIFY and also send a SUBSCRIBE request to remove the subscription. Since this behavior would make subscribers available for use as amplifiers in denial of service attacks, we have instead elected to give the 481 response special meaning: it is used to indicate that a subscription must be cancelled under all circumstances.</P>
<P CLASS="Body">
<A NAME="pgfId-1035925"></A>NOTIFY requests MUST contain a &quot;Subscription-State&quot; header with a value of &quot;active&quot;, &quot;pending&quot;, or &quot;terminated&quot;. The &quot;active&quot; value indicates that the subscription has been accepted and has been authorized (in most cases; see section <A HREF="draft-ietf-sip-events-05.html#64775" CLASS="XRef">6.2.</A>). The &quot;pending&quot; value indicates that the subscription has been received, but that policy information is insufficient to accept or deny the subscription at this time. The &quot;terminated&quot; value indicates that the subscription is not active.</P>
<P CLASS="Body">
<A NAME="pgfId-1037438"></A>If the value of the &quot;Subscription-State&quot; header is &quot;active&quot; or &quot;pending&quot;, the notifier SHOULD also include in the &quot;Subscription-State&quot; header an &quot;expires&quot; parameter which indicates the time remaining on the subscription. The notifier MAY use this mechanism to shorten a subscription; however, this mechanism MUST NOT be used to lengthen a subscription.</P>
<P CLASS="comment">
<A NAME="pgfId-1037439"></A>Including expiration information for active and pending subscriptions is useful in case the SUBSCRIBE request forks, since the response to a forked SUBSCRIBE may not be received by the subscriber. Note well that this &quot;expires&quot; value is a parameter on the &quot;Subscription-State&quot; header, NOT an &quot;Expires&quot; header.</P>
<P CLASS="Body">
<A NAME="pgfId-1036140"></A>If the value of the &quot;Subscription-State&quot; header is &quot;terminated&quot;, the notifier SHOULD also include a &quot;reason&quot; parameter. The notifier MAY also include a &quot;retry-after&quot; parameter, where appropriate. For details on the value and semantics of the &quot;reason&quot; and &quot;retry-after&quot; parameters, see section <A HREF="draft-ietf-sip-events-05.html#47664" CLASS="XRef">4.2.4.</A></P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1035199"></A>4.2.3.	<A NAME="75271"></A>Proxy NOTIFY Behavior</H3>
<P CLASS="Body">
<A NAME="pgfId-1035203"></A>Proxies need no additional behavior beyond that described in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A> to support NOTIFY. If a proxy wishes to see all of the SUBSCRIBE and NOTIFY requests for a given dialog, it MUST record-route the initial SUBSCRIBE and any dialog-establishing NOTIFY requests. Such proxies SHOULD also record-route all other SUBSCRIBE and NOTIFY requests.</P>
<P CLASS="comment">
<A NAME="pgfId-1041049"></A>Note that subscribers and notifiers may elect to use S/MIME encryption of SUBSCRIBE and NOTIFY requests; consequently, proxies cannot rely on being able to access any information that is not explicitly required to be proxy-readable by SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1030513"></A>4.2.4.	<A NAME="47664"></A>Subscriber NOTIFY Behavior</H3>
<P CLASS="Body">
<A NAME="pgfId-1035123"></A>Upon receiving a NOTIFY request, the subscriber should check that it matches at least one of its outstanding subscriptions; if not, it MUST return a &quot;481 Subscription does not exist&quot; response unless another 400- or 500-class response is more appropriate. The rules for matching NOTIFY requests with subscriptions that create a new dialog are described in section <A HREF="draft-ietf-sip-events-05.html#19528" CLASS="XRef">4.3.4.</A> Notifications for subscriptions which were created inside an existing dialog match if they are in the same dialog and the &quot;Event&quot; headers match (as described in section <A HREF="draft-ietf-sip-events-05.html#49211" CLASS="XRef">8.2.1.</A>)</P>
<P CLASS="Body">
<A NAME="pgfId-1032346"></A>If, for some reason, the event package designated in the &quot;Event&quot; header of the NOTIFY request is not supported, the subscriber will respond with a &quot;489 Bad Event&quot; response.</P>
<P CLASS="Body">
<A NAME="pgfId-1032344"></A>To prevent spoofing of events, NOTIFY requests SHOULD be authenticated, using any defined SIP authentication mechanism.</P>
<P CLASS="Body">
<A NAME="pgfId-1031179"></A>NOTIFY requests MUST contain &quot;Subscription-State&quot; headers which indicate the status of the subscription. </P>
<P CLASS="Body">
<A NAME="pgfId-1036052"></A>If the &quot;Subscription-State&quot; header value is &quot;active&quot;, it means that the subscription has been accepted and (in general) has been authorized. If the header also contains an &quot;expires&quot; parameter, the subscriber SHOULD take it as the authoritative subscription duration and adjust accordingly. The &quot;retry-after&quot; and &quot;reason&quot; parameters have no semantics for &quot;active&quot;.</P>
<P CLASS="Body">
<A NAME="pgfId-1036065"></A>If the &quot;Subscription-State&quot; value is &quot;pending&quot;, the subscription has been received by the notifier, but there is insufficient policy information to grant or deny the subscription yet. If the header also contains an &quot;expires&quot; parameter, the subscriber SHOULD take it as the authoritative subscription duration and adjust accordingly. No further action is necessary on the part of the subscriber. The &quot;retry-after&quot; and &quot;reason&quot; parameters have no semantics for &quot;pending&quot;.</P>
<P CLASS="Body">
<A NAME="pgfId-1036086"></A>If the &quot;Subscription-State&quot; value is &quot;terminated&quot;, the subscriber should consider the subscription terminated. The &quot;expires&quot; parameter has no semantics for &quot;terminated&quot;. If a reason code is present, the client should behave as described below. If no reason code or an unknown reason code is present, the client MAY attempt to re-subscribe at any time (unless a &quot;retry-after&quot; parameter is present, in which case the client SHOULD NOT attempt re-subscription until after the number of seconds specified by the &quot;retry-after&quot; parameter). The defined reason codes are:</P>
<P CLASS="Definitions">
<A NAME="pgfId-1035990"></A>deactivated: The subscription has been terminated, but the client SHOULD retry immediately with a new subscription. One primary use of such a status code is to allow migration of subscriptions between nodes. The &quot;retry-after&quot; parameter has no semantics for &quot;deactivated&quot;.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1035991"></A>probation: The subscription has been terminated, but the client SHOULD retry at some later time. If a &quot;retry-after&quot; parameter is also present, the client SHOULD wait at least the number of seconds specified by that parameter before attempting to re-subscribe.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1035992"></A>rejected: The subscription has been terminated due to change in authorization policy. Clients SHOULD NOT attempt to re-subscribe. The &quot;retry-after&quot; parameter has no semantics for &quot;rejected&quot;.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1041320"></A>timeout: The subscription has been terminated because it was not refreshed before it expired. Clients MAY re-subscribe immediately. The &quot;retry-after&quot; parameter has no semantics for &quot;timeout&quot;.</P>
<P CLASS="Definitions">
<A NAME="pgfId-1041321"></A>giveup: The subscription has been terminated because the notifier could not obtain authorization in a timely fashion. If a &quot;retry-after&quot; parameter is also present, the client SHOULD wait at least the number of seconds specified by that parameter before attempting to re-subscribe; otherwise, the client MAY retry immediately, but will likely get put back into pending state. </P>
<P CLASS="Definitions">
<A NAME="pgfId-1041308"></A>noresource: The subscription has been terminated because the resource state which was being monitored no longer exists. Clients SHOULD NOT attempt to re-subscribe. The &quot;retry-after&quot; parameter has no semantics for &quot;noresource&quot;.</P>
<P CLASS="Body">
<A NAME="pgfId-1033961"></A>Once the notification is deemed acceptable to the subscriber, the subscriber SHOULD return a 200 response. In general, it is not expected that NOTIFY responses will contain bodies; however, they MAY, if the NOTIFY request contained an &quot;Accept&quot; header.</P>
<P CLASS="Body">
<A NAME="pgfId-1031182"></A>Other responses defined in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A> may also be returned, as appropriate. In no case should a NOTIFY transaction extend for any longer than the time necessary for automated processing. In particular, subscribers MUST NOT wait for a user response before returning a final response to a NOTIFY request.</P>
</DIV>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1035576"></A>4.3.	General</H2>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1035577"></A>4.3.1.	Detecting support for SUBSCRIBE and NOTIFY</H3>
<P CLASS="Body">
<A NAME="pgfId-1035579"></A>Neither SUBSCRIBE nor NOTIFY necessitate the use of &quot;Require&quot; or &quot;Proxy-Require&quot; headers; similarly, there is no token defined for &quot;Supported&quot; headers. If necessary, clients may probe for the support of SUBSCRIBE and NOTIFY using the OPTIONS request defined in SIP<A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>. </P>
<P CLASS="Body">
<A NAME="pgfId-1035583"></A>The presence of the &quot;Allow-Events&quot; header in a message is sufficient to indicate support for SUBSCRIBE and NOTIFY.</P>
<P CLASS="comment">
<A NAME="pgfId-1035584"></A>The &quot;methods&quot; parameter for Contact may also be used to specifically announce support for SUBSCRIBE and NOTIFY messages when registering. (See reference <A HREF="draft-ietf-sip-events-05.html#90009" CLASS="XRef">[6]</A> for details on the &quot;methods&quot; parameter). </P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1035589"></A>4.3.2.	<A NAME="10385"></A>CANCEL requests</H3>
<P CLASS="Body">
<A NAME="pgfId-1035590"></A>No semantics are associated with cancelling SUBSCRIBE or NOTIFY.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1036186"></A>4.3.3.	<A NAME="87920"></A>Forking</H3>
<P CLASS="Body">
<A NAME="pgfId-1036192"></A>In accordance with the rules for proxying non-INVITE requests as defined in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>, successful SUBSCRIBE requests will receive only one 200-class response; however, due to forking, the subscription may have been accepted by multiple nodes. The subscriber MUST therefore be prepared to receive NOTIFY requests with &quot;From:&quot; tags which differ from the &quot;To:&quot; tag received in the SUBSCRIBE 200-class response.</P>
<P CLASS="Body">
<A NAME="pgfId-1036193"></A>If multiple NOTIFY messages are received in response to a single SUBSCRIBE message, they represent different destinations to which the SUBSCRIBE request was forked. For information on subscriber handling in such situations, see section <A HREF="draft-ietf-sip-events-05.html#49663" CLASS="XRef">5.4.9.</A></P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1035614"></A>4.3.4.	<A NAME="19528"></A>Dialog creation and termination</H3>
<P CLASS="Body">
<A NAME="pgfId-1036335"></A>If an initial SUBSCRIBE request is not sent on a pre-existing dialog, the subscriber will wait for a response to the SUBSCRIBE request or a matching NOTIFY.</P>
<P CLASS="Body">
<A NAME="pgfId-1036373"></A>Responses are matched to such SUBSCRIBE requests if they contain the same the same &quot;Call-ID&quot;, the same &quot;From&quot; header &quot;tag&quot;, and the same &quot;CSeq&quot;. Rules for the comparison of these headers are described in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>. If a 200-class response matches such a SUBSCRIBE request, it creates a new subscription and a new dialog (unless they have already been created by a matching NOTIFY request; see below).</P>
<P CLASS="Body">
<A NAME="pgfId-1036374"></A>NOTIFY requests are matched to such SUBSCRIBE requests if they contain the same &quot;Call-ID&quot;, a &quot;To&quot; header &quot;tag&quot; parameter which matches the &quot;From&quot; header &quot;tag&quot; parameter of the SUBSCRIBE, and the same &quot;Event&quot; header field. Rules for comparisons of the &quot;Event&quot; headers are described in section <A HREF="draft-ietf-sip-events-05.html#49211" CLASS="XRef">8.2.1.</A> If a matching NOTIFY request contains a &quot;Subscription-State&quot; of &quot;active&quot; or &quot;pending&quot;, it creates a new subscription and a new dialog (unless they have already been created by a matching response, as described above).</P>
<P CLASS="Body">
<A NAME="pgfId-1036310"></A>If an initial SUBSCRIBE is sent on a pre-existing dialog, a matching 200-class response or successful NOTIFY request merely creates a new subscription associated with that dialog.</P>
<P CLASS="Body">
<A NAME="pgfId-1036299"></A>Multiple subscriptions can be associated with a single dialog. Subscriptions may also exist in dialogs associated with INVITE-created application state and other application state created by mechanisms defined in other specifications. These sets of application state do not interact beyond the behavior described for a dialog (e.g. route set handling).</P>
<P CLASS="Body">
<A NAME="pgfId-1036309"></A>A subscription is destroyed when a notifier sends a NOTIFY request with a &quot;Subscription-State&quot; of &quot;terminated&quot;.</P>
<P CLASS="comment">
<A NAME="pgfId-1036416"></A>A subscriber may send a SUBSCRIBE request with an &quot;Expires&quot; header of 0 in order to trigger the sending of such a NOTIFY request; however, for the purposes of subscription and dialog lifetime, the subscription is not considered terminated until the NOTIFY with a &quot;Subscription-State&quot; of &quot;terminated&quot; is sent.</P>
<P CLASS="Body">
<A NAME="pgfId-1036315"></A>If a subscription's destruction leaves no other application state associated with the dialog, the dialog terminates. The destruction of other application state (such as that created by an INVITE) will not terminate the dialog if a subscription is still associated with that dialog.</P>
<P CLASS="comment">
<A NAME="pgfId-1040350"></A>Note that the above behavior means that a dialog created with an INVITE does not necessarily terminate upon receipt of a BYE. Similarly, in the case that several subscriptions are associated with a single dialog, the dialog does not terminate until all the subscriptions in it are destroyed.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1040351"></A>4.3.5.	State Agents and Notifier Migration</H3>
<P CLASS="Body">
<A NAME="pgfId-1035596"></A>When state agents (see section <A HREF="draft-ietf-sip-events-05.html#47440" CLASS="XRef">5.4.11.</A>) are used, it is often useful to allow migration of subscriptions between state agents and the nodes for which they are providing state aggregation (or even among various state agents). Such migration may be effected by sending a NOTIFY message with a &quot;Subscription-State&quot; header of &quot;terminated&quot;, and a reason parameter of &quot;deactivated&quot;. This NOTIFY request is otherwise normal, and is formed as described in section <A HREF="draft-ietf-sip-events-05.html#48698" CLASS="XRef">4.2.2.</A></P>
<P CLASS="Body">
<A NAME="pgfId-1035600"></A>Upon receipt of this NOTIFY message, the subscriber SHOULD attempt to re-subscribe (as described in the preceding sections). Note that this subscription is established on a new dialog, and does not re-use the route set from the previous subscription dialog.</P>
<P CLASS="Body">
<A NAME="pgfId-1037471"></A>The actual migration is effected by making a change to the policy (such as routing decisions) of one or more servers to which the SUBSCRIBE request will be sent in such a way that a different node ends up responding to the SUBSCRIBE request. This may be as simple as a change in the local policy in the notifier from which the subscription is migrating so that it serves as a proxy or redirect server instead of a notifier.</P>
<P CLASS="Body">
<A NAME="pgfId-1037504"></A>Whether, when, and why to perform notifier migrations may be described in individual event packages; otherwise, such decisions are a matter of local notifier policy, and are left up to individual implementations.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1030357"></A>4.3.6.	<A NAME="23772"></A>Polling Resource State</H3>
<P CLASS="Body">
<A NAME="pgfId-1031472"></A>A natural consequence of the behavior described in the preceding sections is that an immediate fetch without a persistent subscription may be effected by sending a SUBSCRIBE with an &quot;Expires&quot; of 0.</P>
<P CLASS="Body">
<A NAME="pgfId-1031550"></A>Of course, an immediate fetch while a subscription is active may be effected by sending a SUBSCRIBE with an &quot;Expires&quot; equal to the number of seconds remaining in the subscription.</P>
<P CLASS="Body">
<A NAME="pgfId-1031477"></A>Upon receipt of this SUBSCRIBE request, the notifier (or notifiers, if the SUBSCRIBE request was forked) will send a NOTIFY request containing resource state in the same dialog.</P>
<P CLASS="Body">
<A NAME="pgfId-1036428"></A>Note that the NOTIFY messages triggered by SUBSCRIBE messages with &quot;Expires&quot; headers of 0 will contain a &quot;Subscription-State&quot; value of &quot;terminated&quot;, and a &quot;reason&quot; parameter of &quot;timeout&quot;.</P>
<P CLASS="Body">
<A NAME="pgfId-1041059"></A>Polling of event state can cause significant increases in load on the network and notifiers; as such, it should be used only sparingly. In particular, polling SHOULD NOT be used in circumstances in which it will typically result in more network messages than long-running subscriptions.</P>
<P CLASS="Body">
<A NAME="pgfId-1041067"></A>When polling is used, subscribers SHOULD attempt to cache authentication credentials between polls so as to reduce the number of messages sent.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1031460"></A>4.3.7.	<A NAME="39951"></A>Allow-Events header usage</H3>
<P CLASS="Body">
<A NAME="pgfId-1031110"></A>The &quot;Allow-Events&quot; header, if present, includes a list of tokens which indicates the event packages supported by the client (if sent in a request) or server (if sent in a response). In other words, a node sending an &quot;Allow-Events&quot; header is advertising that it can process SUBSCRIBE requests and generate NOTIFY requests for all of the event packages listed in that header.</P>
<P CLASS="Body">
<A NAME="pgfId-1031111"></A>Any node implementing one or more event packages SHOULD include an appropriate &quot;Allow-Events&quot; header indicating all supported events in all methods which initiate dialogs and their responses (such as INVITE) and OPTIONS responses.</P>
<P CLASS="Body">
<A NAME="pgfId-1031120"></A>This information is very useful, for example, in allowing user agents to render particular interface elements appropriately according to whether the events required to implement the features they represent are supported by the appropriate nodes.</P>
<P CLASS="Body">
<A NAME="pgfId-1034384"></A>Note that &quot;Allow-Events&quot; headers MUST NOT be inserted by proxies.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1035643"></A>4.3.8.	PINT Compatibility</H3>
<P CLASS="Body">
<A NAME="pgfId-1035657"></A>The &quot;Event&quot; header is considered mandatory for the purposes of this document. However, to maintain compatibility with PINT (see <A HREF="draft-ietf-sip-events-05.html#33731" CLASS="XRef">[3]</A>), servers MAY interpret a SUBSCRIBE request with no &quot;Event&quot; header as requesting a subscription to PINT events. If a server does not support PINT, it SHOULD return &quot;489 Bad Event&quot; to any SUBSCRIBE messages without an &quot;Event&quot; header.</P>
</DIV>
</DIV>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1034203"></A>5.	<A NAME="68360"></A>Event Packages</H1>
<P CLASS="Body">
<A NAME="pgfId-1034204"></A>This section covers several issues which should be taken into consideration when event packages based on SUBSCRIBE and NOTIFY are proposed.</P>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1034205"></A>5.1.	Appropriateness of Usage</H2>
<P CLASS="Body">
<A NAME="pgfId-1035229"></A>When designing an event package using the methods described in this draft for event notification, it is important to consider: is SIP an appropriate mechanism for the problem set? Is SIP being selected because of some unique feature provided by the protocol (e.g. user mobility), or merely because &quot;it can be done?&quot; If you find yourself defining event packages for notifications related to, for example, network management or the temperature inside your car's engine, you may want to reconsider your selection of protocols.</P>
<P CLASS="comment">
<A NAME="pgfId-1034207"></A>Those interested in extending the mechanism defined in this document are urged to follow the development of &quot;Guidelines for Authors of SIP Extensions&quot;<A HREF="draft-ietf-sip-events-05.html#42297" CLASS="XRef">[2]</A> for further guidance regarding appropriate uses of SIP.</P>
<P CLASS="Body">
<A NAME="pgfId-1035357"></A>Further, it is expected that this mechanism is not to be used in applications where the frequency of reportable events is excessively rapid (e.g. more than about once per second). A SIP network is generally going to be provisioned for a reasonable signalling volume; sending a notification every time a user's GPS position changes by one hundreth of a second could easily overload such a network.</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1035359"></A>5.2.	<A NAME="37838"></A>Event Template-packages</H2>
<P CLASS="Body">
<A NAME="pgfId-1035360"></A>Normal event packages define a set of state applied to a specific type of resource, such as user presence, call state, and messaging mailbox state. </P>
<P CLASS="Body">
<A NAME="pgfId-1034215"></A>Event template-packages are a special type of package which define a set of state applied to other packages, such as statistics, access policy, and subscriber lists. Event template-packages may even be applied to other event template-packages.</P>
<P CLASS="Body">
<A NAME="pgfId-1034216"></A>To extend the object-oriented analogy made earlier, event template-packages can be thought of as templatized C++ packages which must be applied to other packages to be useful.</P>
<P CLASS="Body">
<A NAME="pgfId-1034217"></A>The name of an event template-package as applied to a package is formed by appending a period followed by the event template-package name to the end of the package. For example, if a template-package called &quot;winfo&quot; were being applied to a package called &quot;presence&quot;, the event token used in &quot;Event&quot; and &quot;Allow-Events&quot; would be &quot;presence.winfo&quot;.</P>
<P CLASS="Body">
<A NAME="pgfId-1034218"></A>Event template-packages must be defined so that they can be applied to any arbitrary package. In other words, event template-packages cannot be specifically tied to one or a few &quot;parent&quot; packages in such a way that they will not work with other packages.</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1034220"></A>5.3.	<A NAME="29508"></A>Amount of State to be Conveyed</H2>
<P CLASS="Body">
<A NAME="pgfId-1034221"></A>When designing event packages, it is important to consider the type of information which will be conveyed during a notification.</P>
<P CLASS="Body">
<A NAME="pgfId-1034222"></A>A natural temptation is to convey merely the event (e.g. &quot;a new voice message just arrived&quot;) without accompanying state (e.g. &quot;7 total voice messages&quot;). This complicates implementation of subscribing entities (since they have to maintain complete state for the entity to which they have subscribed), and also is particularly susceptible to synchronization problems.</P>
<P CLASS="Body">
<A NAME="pgfId-1034223"></A>There are two possible solutions to this problem that event packages may choose to implement.</P>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034633"></A>5.3.1.	Complete State Information</H3>
<P CLASS="Body">
<A NAME="pgfId-1040859"></A>For packages which typically convey state information that is reasonably small (on the order of 1 kb or so), it is suggested that event packages are designed so as to send complete state information when an event occurs.</P>
<P CLASS="Body">
<A NAME="pgfId-1040879"></A>In some circumstances, conveying the current state alone may be insufficient for a particular class of events. In these cases, the event packages should include complete state information along with the event that occurred. For example, conveying &quot;no customer service representatives available&quot; may not be as useful as conveying &quot;no customer service representatives available; representative sip:46@cs.xyz.int just logged off&quot;.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034225"></A>5.3.2.	State Deltas</H3>
<P CLASS="Body">
<A NAME="pgfId-1034634"></A>In the case that the state information to be conveyed is large, the event package may choose to detail a scheme by which NOTIFY messages contain state deltas instead of complete state.</P>
<P CLASS="Body">
<A NAME="pgfId-1034635"></A>Such a scheme would work as follows: any NOTIFY sent in immediate response to a SUBSCRIBE contains full state information. NOTIFY messages sent because of a state change will contain only the state information that has changed; the subscriber will then merge this information into its current knowledge about the state of the resource.</P>
<P CLASS="Body">
<A NAME="pgfId-1034620"></A>Any event package that supports delta changes to states MUST include a version number that increases by exactly one for each NOTIFY message in a subscription. Note that the state version number appears in the body of the message, not in a SIP header.</P>
<P CLASS="Body">
<A NAME="pgfId-1034636"></A>If a NOTIFY arrives that has a version number that is incremented by more than one, the subscriber knows that a state delta has been missed; it ignores the NOTIFY message containing the state delta (except for the version number, which it retains to detect message loss), and re-sends a SUBSCRIBE to force a NOTIFY containing a complete state snapshot.</P>
</DIV>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1034226"></A>5.4.	Event Package Responsibilities</H2>
<P CLASS="Body">
<A NAME="pgfId-1034227"></A>Event packages are not required to re-iterate any of the behavior described in this document, although they may choose to do so for clarity or emphasis. In general, though, such packages are expected to describe only the behavior that extends or modifies the behavior described in this document.</P>
<P CLASS="Body">
<A NAME="pgfId-1034228"></A>Note that any behavior designated with &quot;SHOULD&quot; or &quot;MUST&quot; in this document is not allowed to be weakened by extension documents; however, such documents may elect to strengthen &quot;SHOULD&quot; requirements to &quot;MUST&quot; strength if required by their application.</P>
<P CLASS="comment">
<A NAME="pgfId-1034229"></A>In addition to the normal sections expected in standards-track RFCs and SIP extension documents, authors of event packages need to address each of the issues detailed in the following subsections, whenever applicable.</P>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034236"></A>5.4.1.	Event Package Name</H3>
<P CLASS="Body">
<A NAME="pgfId-1034237"></A>This section, which MUST be present, defines the token name to be used to designate the event package. It MUST include the information which appears in the IANA registration of the token. For information on registering such types, see section <A HREF="draft-ietf-sip-events-05.html#22130" CLASS="XRef">7.</A></P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034241"></A>5.4.2.	Event Package Parameters</H3>
<P CLASS="Body">
<A NAME="pgfId-1034242"></A>If parameters are to be used on the &quot;Event&quot; header to modify the behavior of the event package, the syntax and semantics of such headers MUST be clearly defined.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034243"></A>5.4.3.	SUBSCRIBE Bodies</H3>
<P CLASS="Body">
<A NAME="pgfId-1034244"></A>It is expected that most, but not all, event packages will define syntax and semantics for SUBSCRIBE method bodies; these bodies will typically modify, expand, filter, throttle, and/or set thresholds for the class of events being requested. Designers of event packages are strongly encouraged to re-use existing MIME types for message bodies where practical.</P>
<P CLASS="Body">
<A NAME="pgfId-1034245"></A>This mandatory section of an event package defines what type or types of event bodies are expected in SUBSCRIBE requests (or specify that no event bodies are expected). It should point to detailed definitions of syntax and semantics for all referenced body types.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034246"></A>5.4.4.	Subscription Duration</H3>
<P CLASS="Body">
<A NAME="pgfId-1034247"></A>It is RECOMMENDED that event packages give a suggested range of times considered reasonable for the duration of a subscription. Such packages MUST also define a default &quot;Expires&quot; value to be used if none is specified.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034248"></A>5.4.5.	NOTIFY Bodies</H3>
<P CLASS="Body">
<A NAME="pgfId-1034249"></A>The NOTIFY body is used to report state on the resource being monitored. Each package MUST define what type or types of event bodies are expected in NOTIFY requests. Such packages MUST specify or cite detailed specifications for the syntax and semantics associated with such event body.</P>
<P CLASS="Body">
<A NAME="pgfId-1034250"></A>Event packages also MUST define which MIME type is to be assumed if none are specified in the &quot;Accept&quot; header of the SUBSCRIBE request.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034251"></A>5.4.6.	Notifier processing of SUBSCRIBE requests</H3>
<P CLASS="Body">
<A NAME="pgfId-1034252"></A>This section describes the processing to be performed by the notifier upon receipt of a SUBSCRIBE request. Such a section is required.</P>
<P CLASS="Body">
<A NAME="pgfId-1034253"></A>Information in this section includes details of how to authenticate subscribers and authorization issues for the package. Such authorization issues may include, for example, whether all SUBSCRIBE requests for this package are answered with 202 responses (see section <A HREF="draft-ietf-sip-events-05.html#64775" CLASS="XRef">6.2.</A>).</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034254"></A>5.4.7.	<A NAME="90682"></A>Notifier generation of NOTIFY requests</H3>
<P CLASS="Body">
<A NAME="pgfId-1039960"></A>This section of an event package describes the process by which the notifier generates and sends a NOTIFY request. This includes detailed information about what events cause a NOTIFY to be sent, how to compute the state information in the NOTIFY, how to generate neutral or fake state information to hide authorization delays and decisions from users, and whether state information is complete or deltas for notifications; see section <A HREF="draft-ietf-sip-events-05.html#29508" CLASS="XRef">5.3.</A> Such a section is required.</P>
<P CLASS="Body">
<A NAME="pgfId-1034259"></A>This section may optionally describe the behavior used to process the subsequent response.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034260"></A>5.4.8.	Subscriber processing of NOTIFY requests</H3>
<P CLASS="Body">
<A NAME="pgfId-1034261"></A>This section of an event package describes the process followed by the subscriber upon receipt of a NOTIFY request, including any logic required to form a coherent resource state (if applicable).</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034262"></A>5.4.9.	<A NAME="49663"></A>Handling of forked requests</H3>
<P CLASS="Body">
<A NAME="pgfId-1034263"></A>Each event package MUST specify whether forked SUBSCRIBE requests are allowed to install multiple subscriptions.</P>
<P CLASS="Body">
<A NAME="pgfId-1036223"></A>If such behavior is not allowed, the first potential dialog-establishing message will create a dialog. All subsequent NOTIFY messages which correspond to the SUBSCRIBE message (i.e. match &quot;To&quot;, &quot;From&quot;, &quot;From&quot; header &quot;tag&quot; parameter, &quot;Call-ID&quot;, &quot;CSeq&quot;, &quot;Event&quot;, and &quot;Event&quot; header &quot;id&quot; parameter) but which do not match the dialog would be rejected with a 481 response. Note that the 200-class response to the SUBSCRIBE can arrive after a matching NOTIFY has been received; such responses might not correlate to the same dialog established by the NOTIFY. Except as required to complete the SUBSCRIBE transaction, such non-matching 200-class responses are ignored.</P>
<P CLASS="Body">
<A NAME="pgfId-1036222"></A>If installing of multiple subscriptions by way of a single forked SUBSCRIBE is allowed, the subscriber establishes a new dialog towards each notifier by returning a 200-class response to each NOTIFY. Each dialog is then handled as its own entity, and is refreshed independent of the other dialogs.</P>
<P CLASS="Body">
<A NAME="pgfId-1034264"></A>In the case that multiple subscriptions are allowed, the event package MUST specify whether merging of the notifications to form a single state is required, and how such merging is to be performed. Note that it is possible that some event packages may be defined in such a way that each dialog is tied to a mutually exclusive state which is unaffected by the other dialogs; this MUST be clearly stated if it is the case.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034265"></A>5.4.10.	Rate of notifications</H3>
<P CLASS="Body">
<A NAME="pgfId-1034266"></A>Each event package is expected to define a requirement (SHOULD or MUST strength) which defines an absolute maximum on the rate at which notifications are allowed to be generated by a single notifier.</P>
<P CLASS="Body">
<A NAME="pgfId-1034267"></A>Each package MAY further define a throttle mechanism which allows subscribers to further limit the rate of notification.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034269"></A>5.4.11.	<A NAME="47440"></A>State Agents</H3>
<P CLASS="Body">
<A NAME="pgfId-1034270"></A>Designers of event packages should consider whether their package can benefit from network aggregation points (state agents) and/or nodes which act on behalf of other nodes. (For example, nodes which provide state information about a resource when such a resource is unable or unwilling to provide such state information itself). An example of such an application is a node which tracks the presence and availability of a user in the network.</P>
<P CLASS="Body">
<A NAME="pgfId-1034271"></A>If state agents are to be used by the package, the package MUST specify how such state agents aggregate information and how they provide authentication and authorization.</P>
<P CLASS="Body">
<A NAME="pgfId-1037509"></A>Event packages MAY also outline specific scenarios under which notifier migrations take place.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034272"></A>5.4.12.	Examples</H3>
<P CLASS="Body">
<A NAME="pgfId-1034273"></A>Event packages SHOULD include several demonstrative message flow diagrams paired with several typical, syntactically correct and complete messages.</P>
<P CLASS="Body">
<A NAME="pgfId-1034274"></A>It is RECOMMENDED that documents describing event packages clearly indicate that such examples are informative and not normative, with instructions that implementors refer to the main text of the draft for exact protocol details.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1035233"></A>5.4.13.	Use of URIs to Retrieve State</H3>
<P CLASS="Body">
<A NAME="pgfId-1035240"></A>Some types of event packages may define state information which is potentially too large to reasonably send in a SIP message. To alleviate this problem, event packages may include the ability to convey a URI instead of state information; this URI will then be used to retrieve the actual state information.</P>
<P CLASS="Body">
<A NAME="pgfId-1041088"></A>The precise mechanisms for conveying such URIs are out of the scope of this document.</P>
</DIV>
</DIV>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1033852"></A>6.	<A NAME="67345"></A>Security Considerations</H1>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1033853"></A>6.1.	Access Control</H2>
<P CLASS="Body">
<A NAME="pgfId-1033860"></A>The ability to accept subscriptions should be under the direct control of the notifier's user, since many types of events may be considered sensitive for the purposes of privacy. Similarly, the notifier should have the ability to selectively reject subscriptions based on the subscriber identity (based on access control lists), using standard SIP authentication mechanisms. The methods for creation and distribution of such access control lists is outside the scope of this draft.</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1033864"></A>6.2.	<A NAME="64775"></A>Notifier Privacy Mechanism</H2>
<P CLASS="Body">
<A NAME="pgfId-1033861"></A>The mere act of returning a 200 or certain 4xx and 6xx responses to SUBSCRIBE requests may, under certain circumstances, create privacy concerns by revealing sensitive policy information. In these cases, the notifier SHOULD always return a 202 response. While the subsequent NOTIFY message may not convey true state, it MUST appear to contain a potentially correct piece of data from the point of view of the subscriber, indistinguishable from a valid response. Information about whether a user is authorized to subscribe to the requested state is never conveyed back to the original user under these circumstances.</P>
<P CLASS="Body">
<A NAME="pgfId-1041290"></A>Individual packages and their related drafts for which such a mode of operation makes sense can further describe how and why to generate such potentially correct data. For example, such a mode of operation is mandated by RFC 2779 <A HREF="draft-ietf-sip-events-05.html#19042" CLASS="XRef">[8]</A> for user presence information.</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1034395"></A>6.3.	Denial-of-Service attacks</H2>
<P CLASS="Body">
<A NAME="pgfId-1033838"></A>The current model (one SUBSCRIBE request triggers a SUBSCRIBE response and one or more NOTIFY requests) is a classic setup for an amplifier node to be used in a smurf attack.</P>
<P CLASS="Body">
<A NAME="pgfId-1033839"></A>Also, the creation of state upon receipt of a SUBSCRIBE request can be used by attackers to consume resources on a victim's machine, rendering it unusable.</P>
<P CLASS="Body">
<A NAME="pgfId-1033867"></A>To reduce the chances of such an attack, implementations of notifiers SHOULD require authentication. Authentication issues are discussed in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1035280"></A>6.4.	Replay Attacks</H2>
<P CLASS="Body">
<A NAME="pgfId-1036867"></A>Replaying of either SUBSCRIBE or NOTIFY can have detrimental effects.</P>
<P CLASS="Body">
<A NAME="pgfId-1036868"></A>In the case of SUBSCRIBE messages, attackers may be able to install any arbitrary subscription which it witnessed being installed at some point in the past. Replaying of NOTIFY messages may be used to spoof old state information (although a good versioning mechanism in the body of the NOTIFY messages may help mitigate such an attack). Note that the prohibition on sending NOTIFY messages to nodes which have not subscribed to an event also aids in mitigating the effects of such an attack.</P>
<P CLASS="Body">
<A NAME="pgfId-1036882"></A>To prevent such attacks, implementations SHOULD require authentication with anti-replay protection. Authentication issues are discussed in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1036878"></A>6.5.	Man-in-the middle attacks</H2>
<P CLASS="Body">
<A NAME="pgfId-1036886"></A>Even with authentication, man-in-the-middle attacks using SUBSCRIBE may be used to install arbitrary subscriptions, hijack existing subscriptions, terminate outstanding subscriptions, or modify the resource to which a subscription is being made. To prevent such attacks, implementations SHOULD provide integrity protection across &quot;Contact&quot;, &quot;Route&quot;, &quot;Expires&quot;, &quot;Event&quot;, and &quot;To&quot; headers of SUBSCRIBE messages, at a minimum. If SUBSCRIBE bodies are used to define further information about the state of the call, they SHOULD be included in the integrity protection scheme.</P>
<P CLASS="Body">
<A NAME="pgfId-1036887"></A>Man-in-the-middle attacks may also attempt to use NOTIFY messages to spoof arbitrary state information and/or terminate outstanding subscriptions. To prevent such attacks, implementations SHOULD provide integrity protection across the &quot;Call-ID&quot;, &quot;CSeq&quot;, and &quot;Subscription-State&quot; headers and the bodies of NOTIFY messages.</P>
<P CLASS="Body">
<A NAME="pgfId-1036898"></A>Integrity protection of message headers and bodies is discussed in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1035293"></A>6.6.	Confidentiality</H2>
<P CLASS="Body">
<A NAME="pgfId-1036902"></A>The state information contained in a NOTIFY message has the potential to contain sensitive information. Implementations MAY encrypt such information to ensure confidentiality.</P>
<P CLASS="Body">
<A NAME="pgfId-1036905"></A>While less likely, it is also possible that the information contained in a SUBSCRIBE message contains information that users might not want to have revealed. Implementations MAY encrypt such information to ensure confidentiality.</P>
<P CLASS="Body">
<A NAME="pgfId-1036909"></A>To allow the remote party to hide information it considers sensitive, all implementations SHOULD be able to handle encrypted SUBSCRIBE and NOTIFY messages.</P>
<P CLASS="Body">
<A NAME="pgfId-1036910"></A>The mechanisms for providing confidentiality are detailed in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
</DIV>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1033052"></A>7.	<A NAME="22130"></A>IANA Considerations</H1>
<P CLASS="Body">
<A NAME="pgfId-1033057"></A>(This section is not applicable until this document is published as an RFC.)</P>
<P CLASS="Body">
<A NAME="pgfId-1033062"></A>This document defines an event-type namespace which requires a central coordinating body. The body chosen for this coordination is the Internet Assigned Numbers Authority (IANA).</P>
<P CLASS="Body">
<A NAME="pgfId-1033063"></A>There are two different types of event-types: normal event packages, and event template-packages; see section <A HREF="draft-ietf-sip-events-05.html#37838" CLASS="XRef">5.2.</A> To avoid confusion, template-package names and package names share the same namespace; in other words, an event template-package MUST NOT share a name with a package.</P>
<P CLASS="Body">
<A NAME="pgfId-1033255"></A>Following the policies outlined in &quot;Guidelines for Writing an IANA Considerations Section in RFCs&quot;<A HREF="draft-ietf-sip-events-05.html#66406" CLASS="XRef">[5]</A>, normal event package identification tokens are allocated as First Come First Served, and event template-package identification tokens are allocated on a IETF Consensus basis.</P>
<P CLASS="Body">
<A NAME="pgfId-1033135"></A>Registrations with the IANA MUST include the token being registered and whether the token is a package or a template-package. Further, packages MUST include contact information for the party responsible for the registration and/or a published document which describes the event package. Event template-package token registrations MUST include a pointer to the published RFC which defines the event template-package.</P>
<P CLASS="Body">
<A NAME="pgfId-1033139"></A>Registered tokens to designate packages and template-packages MUST NOT contain the character &quot;.&quot;, which is used to separate template-packages from packages.</P>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1033169"></A>7.1.	Registration Information</H2>
<P CLASS="Body">
<A NAME="pgfId-1035302"></A>As this document specifies no package or template-package names, the initial IANA registration for event types will be empty. The remainder of the text in this section gives an example of the type of information to be maintained by the IANA; it also demonstrates all five possible permutations of package type, contact, and reference.</P>
<P CLASS="Body">
<A NAME="pgfId-1033164"></A>The table below lists the event packages and template-packages defined in &quot;SIP-Specific Event Notification&quot; [RFC xxxx]. Each name is designated as a package or a template-package under &quot;Type&quot;. </P>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1033166"></A>Package Name      Type         Contact      Reference
------------      ----         -------      ---------
example1          package      [Roach]
example2          package      [Roach]      [RFC xxxx]
example3          package                   [RFC xxxx]
example4          template     [Roach]      [RFC xxxx]
example5          template                  [RFC xxxx]
</PRE>
<PRE CLASS="Preformat"><A NAME="pgfId-1033185"></A>PEOPLE
------
[Roach] Adam Roach &lt;adam@dynamicsoft.com&gt;</PRE>
<PRE CLASS="Preformat"><A NAME="pgfId-1033186"></A>REFERENCES
----------
[RFC xxxx] A. Roach &quot;SIP-Specific Event Notification&quot;, RFC XXXX,
           August 2002.</PRE>
</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1036932"></A>7.2.	Registration Template</H2>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1036936"></A>To: ietf-sip-events@iana.org
Subject: Registration of new SIP event package</PRE>
<PRE CLASS="Preformat"><A NAME="pgfId-1036963"></A>Package Name:</PRE>
</P>
<P CLASS="comment">
<A NAME="pgfId-1037048"></A>(Package names must conform to the syntax described in section <A HREF="draft-ietf-sip-events-05.html#49211" CLASS="XRef">8.2.1.</A>)</P>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1037052"></A>Is this registration for a Template Package:</PRE>
</P>
<P CLASS="comment">
<A NAME="pgfId-1037006"></A>(indicate yes or no)</P>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1036976"></A>Published Specification(s):</PRE>
</P>
<P CLASS="comment">
<A NAME="pgfId-1037022"></A>(Template packages require a published RFC. Other packages may reference a specification when appropriate).</P>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1036983"></A>Person &amp; email address to contact for further information:</PRE>
</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1036966"></A>7.3.	Header Field Names</H2>
<P CLASS="Body">
<A NAME="pgfId-1041441"></A>This document registers three new header field names, described elsewhere in this document. These headers are defined by the following information, which is to be added to the header sub-registry under http://www.iana.org/assignments/sip-parameters.</P>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1041452"></A>Header Name:   Allow-Events
Compact Form:  u</PRE>
<PRE CLASS="Preformat"><A NAME="pgfId-1041463"></A>Header Name:   Subscription-State
Compact Form:  (none)</PRE>
<PRE CLASS="Preformat"><A NAME="pgfId-1041467"></A>Header Name:   Event
Compact Form:  o</PRE>
</P>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1041437"></A>7.4.	Response Codes</H2>
<P CLASS="Body">
<A NAME="pgfId-1041472"></A>This document registers two new methods. These methods are defined by the following information, which is to be added to the method and response-code sub-registry under http://www.iana.org/assignments/sip-parameters.</P>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1041506"></A>Response Code Number:   202
Default Reason Phrase:  Accepted</PRE>
<PRE CLASS="Preformat"><A NAME="pgfId-1041510"></A>Response Code Number:   489
Default Reason Phrase:  Bad Event</PRE>
</P>
</DIV>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1041427"></A>8.	Syntax</H1>
<P CLASS="Body">
<A NAME="pgfId-1034814"></A>This section describes the syntax extensions required for event notification in SIP. Semantics are described in section <A HREF="draft-ietf-sip-events-05.html#45552" CLASS="XRef">4.</A> Note that the formal syntax definitions described in this document are expressed in the ABNF format used in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>, and contain references to elements defined therein.</P>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1034819"></A>8.1.	<A NAME="28355"></A>New Methods</H2>
<P CLASS="Body">
<A NAME="pgfId-1034820"></A>This document describes two new SIP methods: SUBSCRIBE and NOTIFY.</P>
<P CLASS="Body">
<A NAME="pgfId-1034825"></A>This table expands on tables 2 and 3 in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>.</P>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1037237"></A>Header                    Where    SUB NOT
------                    -----    --- ---
Accept                      R       o   o
Accept                     2xx      -   -
Accept                     415      o   o
Accept-Encoding             R       o   o
Accept-Encoding            2xx      -   -
Accept-Encoding            415      o   o
Accept-Language             R       o   o
Accept-Language            2xx      -   -
Accept-Language            415      o   o
Alert-Info                  R       -   -
Alert-Info                 180      -   -
Allow                       R       o   o
Allow                      2xx      o   o
Allow                       r       o   o
Allow                      405      m   m
Authentication-Info        2xx      o   o
Authorization               R       o   o
Call-ID                     c       m   m
Contact                     R       m   m
Contact                    1xx      o   o
Contact                    2xx      m   o
Contact                    3xx      m   m
Contact                    485      o   o
Content-Disposition                 o   o
Content-Encoding                    o   o
Content-Language                    o   o
Content-Length                      t   t
Content-Type                        *   *
CSeq                        c       m   m
Date                                o   o
Error-Info               300-699    o   o
Expires                             o   -
Expires                    2xx      m   -
From                        c       m   m
In-Reply-To                 R       -   -
Max-Forwards                R       m   m
Min-Expires                423      m   -
MIME-Version                        o   o
Organization                        o   -
Priority                    R       o   -
Proxy-Authenticate         407      m   m
Proxy-Authorization         R       o   o
Proxy-Require               R       o   o
RAck                        R       -   -
Record-Route                R       o   o
Record-Route           2xx,401,484  o   o
Reply-To                            -   -
Require                             o   o
Retry-After        404,413,480,486  o   o
Retry-After              500,503    o   o
Retry-After              600,603    o   o
Route                       R       c   c
RSeq                       1xx      o   o
Server                      r       o   o
Subject                     R       -   -
Supported                   R       o   o
Supported                  2xx      o   o
Timestamp                           o   o
To                         c(1)     m   m
Unsupported                420      o   o
User-Agent                          o   o
Via                         c       m   m
Warning                     R       -   o
Warning                     r       o   o
WWW-Authenticate           401      m   m</PRE>
</P>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034827"></A>8.1.1.	SUBSCRIBE method</H3>
<P CLASS="Body">
<A NAME="pgfId-1034829"></A>&quot;SUBSCRIBE&quot; is added to the definition of the element &quot;Method&quot; in the SIP message grammar.</P>
<P CLASS="Body">
<A NAME="pgfId-1034830"></A>Like all SIP method names, the SUBSCRIBE method name is case sensitive. The SUBSCRIBE method is used to request asynchronous notification of an event or set of events at a later time.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034831"></A>8.1.2.	NOTIFY method</H3>
<P CLASS="Body">
<A NAME="pgfId-1034832"></A>&quot;NOTIFY&quot; is added to the definition of the element &quot;Method&quot; in the SIP message grammar.</P>
<P CLASS="Body">
<A NAME="pgfId-1034833"></A>The NOTIFY method is used to notify a SIP node that an event which has been requested by an earlier SUBSCRIBE method has occurred. It may also provide further details about the event.</P>
</DIV>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1037066"></A>8.2.	New Headers</H2>
<P CLASS="Body">
<A NAME="pgfId-1037070"></A>This table expands on tables 2 and 3 in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>, as amended by the changes described in section <A HREF="draft-ietf-sip-events-05.html#28355" CLASS="XRef">8.1.</A></P>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1040520"></A>Header field      where proxy ACK BYE CAN INV OPT REG PRA SUB NOT
-----------------------------------------------------------------
Allow-Events        R          o   o   -   o   o   o   o   o   o
Allow-Events       2xx         -   o   -   o   o   o   o   o   o
Allow-Events       489         -   -   -   -   -   -   -   m   m
Event               R          -   -   -   -   -   -   -   m   m
Subscription-State  R          -   -   -   -   -   -   -   -   m
</PRE>
</P>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034844"></A>8.2.1.	<A NAME="49211"></A>&quot;Event&quot; header</H3>
<P CLASS="Body">
<A NAME="pgfId-1034847"></A>Event is added to the definition of the element &quot;message-header&quot; in the SIP message grammar.</P>
<P CLASS="Body">
<A NAME="pgfId-1034848"></A>For the purposes of matching responses and NOTIFY messages with SUBSCRIBE messages, the event-type portion of the &quot;Event&quot; header is compared byte-by-byte, and the &quot;id&quot; parameter token (if present) is compared byte-by-byte. An &quot;Event&quot; header containing an &quot;id&quot; parameter never matches an &quot;Event&quot; header without an &quot;id&quot; parameter. No other parameters are considered when performing a comparison.</P>
<P CLASS="comment">
<A NAME="pgfId-1040653"></A>Note that the forgoing text means that &quot;Event: foo; id=1234&quot; would match &quot;Event: foo; param=abcd; id=1234&quot;, but not &quot;Event: foo&quot; (id does not match) or &quot;Event: Foo; id=1234&quot; (event portion does not match).</P>
<P CLASS="Body">
<A NAME="pgfId-1036360"></A>This document does not define values for event-types. These values will be defined by individual event packages, and MUST be registered with the IANA.</P>
<P CLASS="Body">
<A NAME="pgfId-1034849"></A>There MUST be exactly one event type listed per event header. Multiple events per message are disallowed.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034851"></A>8.2.2.	&quot;Allow-Events&quot; Header</H3>
<P CLASS="Body">
<A NAME="pgfId-1034854"></A>Allow-Events is added to the definition of the element &quot;general-header&quot; in the SIP message grammar. Its usage is describe in section <A HREF="draft-ietf-sip-events-05.html#39951" CLASS="XRef">4.3.7.</A></P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034856"></A>8.2.3.	&quot;Subscription-State&quot; Header</H3>
<P CLASS="Body">
<A NAME="pgfId-1034862"></A>Subscription-State is added to the definition of the element &quot;request-header&quot; in the SIP message grammar. Its usage is described in section <A HREF="draft-ietf-sip-events-05.html#47664" CLASS="XRef">4.2.4.</A></P>
</DIV>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1034863"></A>8.3.	New Response Codes</H2>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034864"></A>8.3.1.	&quot;202 Accepted&quot; Response Code</H3>
<P CLASS="Body">
<A NAME="pgfId-1034865"></A>The 202 response is added to the &quot;Success&quot; header field definition. &quot;202 Accepted&quot; has the same meaning as that defined in HTTP/1.1 <A HREF="draft-ietf-sip-events-05.html#20469" CLASS="XRef">[4]</A>.</P>
</DIV>
<DIV>
<H3 CLASS="Heading3">
<A NAME="pgfId-1034871"></A>8.3.2.	&quot;489 Bad Event&quot; Response Code</H3>
<P CLASS="Body">
<A NAME="pgfId-1034872"></A>The 489 event response is added to the &quot;Client-Error&quot; header field definition. &quot;489 Bad Event&quot; is used to indicate that the server did not understand the event package specified in a &quot;Event&quot; header field.</P>
</DIV>
</DIV>
<DIV>
<H2 CLASS="Heading2">
<A NAME="pgfId-1040084"></A>8.4.	Augmented BNF Definitions</H2>
<P CLASS="Body">
<A NAME="pgfId-1040092"></A>The Augmented BNF definitions for the various new and modified syntax elements follows. The notation is as used in SIP <A HREF="draft-ietf-sip-events-05.html#53863" CLASS="XRef">[1]</A>, and any elements not defined in this section are as defined in SIP and the documents to which it refers.</P>
<P><PRE CLASS="Preformat"><A NAME="pgfId-1040298"></A>SUBSCRIBEm        = %x53.55.42.53.43.52.49.42.45 ; SUBSCRIBE in caps
NOTIFYm           = %x4E.4F.54.49.46.59 ; NOTIFY in caps
extension-method = SUBSCRIBEm / NOTIFYm / token</PRE>
<PRE CLASS="Preformat"><A NAME="pgfId-1040171"></A>Event             =  ( &quot;Event&quot; / &quot;o&quot; ) HCOLON event-type
                     *( SEMI event-param )
event-type        =  event-package *( &quot;.&quot; event-template )
event-package     =  token-nodot
event-template    =  token-nodot
token-nodot       =  1*( alphanum / &quot;-&quot;  / &quot;!&quot; / &quot;%&quot; / &quot;*&quot;
                         / &quot;_&quot; / &quot;+&quot; / &quot;`&quot; / &quot;'&quot; / &quot;&#126;&quot; )
event-param      =  generic-param / ( &quot;id&quot; EQUAL token )</PRE>
<PRE CLASS="Preformat"><A NAME="pgfId-1040172"></A>Allow-Events =  ( &quot;Allow-Events&quot; / &quot;u&quot; ) HCOLON event-type
                *(COMMA event-type)</PRE>
<PRE CLASS="Preformat"><A NAME="pgfId-1040340"></A>Subscription-State   = &quot;Subscription-State&quot; HCOLON substate-value
                       *( SEMI subexp-params )
substate-value       = &quot;active&quot; / &quot;pending&quot; / &quot;terminated&quot;
                       / extension-substate
extension-substate   = token
subexp-params        =   (&quot;reason&quot; EQUAL reason-value)
                       / (&quot;expires&quot; EQUAL delta-seconds)
                       / (&quot;retry-after&quot; EQUAL delta-seconds)
                       / generic-param
reason-value         =   &quot;deactivated&quot;
                       / &quot;probation&quot;
                       / &quot;rejected&quot;
                       / &quot;timeout&quot;
                       / &quot;giveup&quot;
                       / &quot;noresource&quot;
                       / reason-extension
reason-extension     = token</PRE>
</P>
</DIV>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1031246"></A>9.	<A NAME="67366"></A>References</H1>
<P CLASS="Body">
<A NAME="pgfId-1041093"></A>NOTE: Non-normative references are so labeled.</P>
<P CLASS="Body">
<A NAME="pgfId-1041094"></A>&nbsp;</P>
<P CLASS="Reference">
<A NAME="pgfId-1031248"></A>[1]	<A NAME="53863"></A>J. Rosenberg et. al., &quot;SIP: Session Initiation Protocol&quot;, &lt;draft-ietf-sip-rfc2543bis-07&gt;, IETF; February 2002. Work in progress.</P>
<P CLASS="Reference">
<A NAME="pgfId-1031252"></A>[2]	<A NAME="42297"></A>J. Rosenberg, H. Schulzrinne, &quot;Guidelines for Authors of SIP Extensions&quot;, &lt;draft-ietf-sip-guidelines-03.txt&gt;, IETF; November 2001. Work in progress. Non-normative.</P>
<P CLASS="Reference">
<A NAME="pgfId-1031254"></A>[3]	<A NAME="33731"></A>S. Petrack, L. Conroy, &quot;The PINT Service Protocol&quot;, RFC 2848, IETF; June 2000.</P>
<P CLASS="Reference">
<A NAME="pgfId-1032530"></A>[4]	<A NAME="20469"></A>R. Fielding et. al., &quot;Hypertext Transfer Protocol -- HTTP/1.1&quot;, RFC 2616, IETF, June 1999.</P>
<P CLASS="Reference">
<A NAME="pgfId-1034767"></A>[5]	<A NAME="66406"></A>T. Narten, H. Alvestrand, &quot;Guidelines for Writing an IANA Considerations Section in RFCs&quot;, BCP 26, IETF, October 1998.</P>
<P CLASS="Reference">
<A NAME="pgfId-1040398"></A>[6]	<A NAME="90009"></A>Schulzrinne/Rosenberg, &quot;SIP Caller Preferences and Callee Capabilities&quot;, &lt;draft-ietf-sip-callerprefs-05.txt&gt;, IETF; November 2001. Work in progress. Non-normative.</P>
<P CLASS="Reference">
<A NAME="pgfId-1040399"></A>[7]	<A NAME="83843"></A>S. Bradner, &quot;Key words for use in RFCs to indicate requirement levels&quot;, RFC 2119, IETF, March 1997</P>
<P CLASS="Reference">
<A NAME="pgfId-1041291"></A>[8]	<A NAME="19042"></A>M. Day et. al., &quot;Instant Messaging/Presence Protocol Requirements&quot;, RFC 2779, IETF, February 2000</P>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1040400"></A>10.	Acknowledgements</H1>
<P CLASS="Body">
<A NAME="pgfId-1032532"></A>Thanks to the participants in the Events BOF at the 48th IETF meeting in Pittsburgh, as well as those who gave ideas and suggestions on the SIP Events mailing list. In particular, I wish to thank Henning Schulzrinne of Columbia University for coming up with the final three-tiered event identification scheme, Sean Olson for miscellaneous guidance, Jonathan Rosenberg for a thorough scrubbing of the -00 draft, and the authors of the &quot;SIP Extensions for Presence&quot; draft for their input to SUBSCRIBE and NOTIFY request semantics.</P>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1031683"></A>11.	Author's Address</H1>
<P CLASS="Body">
<A NAME="pgfId-1041412"></A><A HREF="draft-ietf-sip-events-05.html#88493" CLASS="XRef">Adam Roach</A><BR>
<A HREF="draft-ietf-sip-events-05.html#71684" CLASS="XRef">dynamicsoft</A><BR>
5100 Tennyson Parkway<BR>
Suite 1200<BR>
Plano, TX 75024<BR>
USA<BR>
E-Mail: &lt;adam@dynamicsoft.com&gt;<BR>
Voice: &lt;sip:adam@dynamicsoft.com&gt;</P>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1041276"></A>12.	Notice Regarding Intellectual Property Rights</H1>
<P CLASS="Body">
<A NAME="pgfId-1041334"></A>The IETF has been notified of intellectual property rights claimed in regard to some or all of the specification contained in this document. For more information, consult the online list of claimed rights at http://www.ietf.org/ipr.html</P>
</DIV>
<DIV>
<H1 CLASS="Heading1">
<A NAME="pgfId-1041333"></A>13.	Full Copyright Statement </H1>
<P CLASS="Body">
<A NAME="pgfId-1041258"></A>Copyright (c) The Internet Society (2002). All Rights Reserved.</P>
<P CLASS="Body">
<A NAME="pgfId-1041283"></A>This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to the Internet Society or other Internet organizations, except as needed for the purpose of developing Internet standards in which case the procedures for copyrights defined in the Internet Standards process must be followed, or as required to translate it into languages other than English.</P>
<P CLASS="Body">
<A NAME="pgfId-1041286"></A>The limited permissions granted above are perpetual and will not be revoked by the Internet Society or its successors or assigns.</P>
<P CLASS="Body">
<A NAME="pgfId-1041287"></A>This document and the information contained herein is provided on an &quot;AS IS&quot; basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. </P>
</DIV>
<TABLE NAME="Footer" WIDTH=100%><TR><TD>Roach</TD><TD ALIGN=RIGHT>[Page 35]</TD></TR></TABLE>
</BODY>
</HTML>
